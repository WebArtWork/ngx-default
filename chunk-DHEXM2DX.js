import{f as Ie}from"./chunk-NDTEPHHI.js";import{a as Le}from"./chunk-FDHJPNWT.js";import{a as ye,j as Te,s as Ve,t as ae,u as ke,v as Me,w as Se}from"./chunk-BE45KCKU.js";import{$ as l,$a as A,Aa as p,Ba as J,Bb as re,E as me,Ha as Y,Ia as V,Ib as ve,J as _,K as d,Ka as v,Lb as ge,Ma as r,R as $,S as Q,Sa as xe,Ta as Z,Ua as U,Va as ee,Xa as I,Za as w,_a as S,ba as K,db as te,ea as R,eb as k,fa as z,fb as a,ga as H,gb as fe,ia as G,jb as we,kb as be,ma as X,mb as he,pb as g,qb as y,ra as F,rb as ne,sa as C,ta as x,ua as W,ub as E,va as Ce,wa as O,wb as B,xa as P,xb as b,ya as M,yb as ie,z as ue,za as c,zb as oe}from"./chunk-GEUL6SEO.js";var L={type:"text",name:"name",label:"",placeholder:"",items:[],disabled:!1,focused:!1,clearable:!1,wClass:"",autocomplete:void 0,error:null,icons:[]};var Pe=["inputEl"];function Ne(i,s){if(i&1&&(c(0,"span",2),w(1),g(2,"translate"),p()),i&2){r(2);let e=a(3);l(),S(y(2,1,e))}}function Ae(i,s){if(i&1){let e=V();c(0,"input",10,0),g(2,"translate"),v("keydown",function(t){_(e);let o=r(2);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(2);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(2);return d(o.wBlur.emit(t))})("keyup.enter",function(){_(e);let t=r(2);return d(t.onSubmit())})("input",function(t){_(e);let o=r(2);return d(o.onInput(t))}),p(),R()}if(i&2){let e=r(2),n=a(0),t=a(1),o=a(4),u=a(6),m=a(8),h=a(9);I("error",h),M("placeholder",y(2,8,m||"Enter text..."))("autocomplete",e.getAutocompleteAttr(t))("manualDisabled",o)("formField",n)("ngClass",u)("manualType",t==="password"?e.showPassword()?"text":"password":t||"text"),z()}}function Be(i,s){if(i&1){let e=V();c(0,"input",11,0),g(2,"translate"),v("keydown",function(t){_(e);let o=r(2);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(2);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(2);return d(o.wBlur.emit(t))})("keyup.enter",function(){_(e);let t=r(2);return d(t.onSubmit())})("input",function(t){_(e);let o=r(2);return d(o.onInput(t))}),p()}if(i&2){let e=r(2),n=a(1),t=a(2),o=a(4),u=a(6),m=a(8),h=a(9);I("error",h),M("placeholder",y(2,9,m||"Enter text..."))("autocomplete",e.getAutocompleteAttr(n))("value",e.wModel()??"")("ngClass",u),F("disabled",o?"":null)("name",t)("type",n==="password"?e.showPassword()?"text":"password":n||"text")}}function $e(i,s){if(i&1){let e=V();c(0,"button",12),g(1,"translate"),v("click",function(){_(e);let t=r(2);return d(t.onClear())}),w(2," close "),p()}i&2&&F("aria-label",y(1,1,"Clear"))}function Ke(i,s){if(i&1){let e=V();c(0,"button",13),g(1,"translate"),v("click",function(){_(e);let t=r(2);return d(t.showPassword.set(!t.showPassword()))}),w(2," visibility "),p()}if(i&2){let e=r(2);F("aria-label",y(1,1,e.showPassword()?"Hide password":"Show password"))}}function je(i,s){if(i&1){let e=V();c(0,"material-icon",14),v("click",function(){let t=_(e).$implicit;return d(t.click==null?null:t.click())}),p()}if(i&2){let e=s.$implicit;M("name",e.name||"")("icon",e.icon)}}function qe(i,s){if(i&1&&(c(0,"div",9),w(1),g(2,"translate"),p()),i&2){r(2);let e=a(9);l(),S(y(2,1,e))}}function Qe(i,s){if(i&1&&(c(0,"label",1),C(1,Ne,3,3,"span",2),c(2,"div",3),C(3,Ae,3,10,"input",4)(4,Be,3,11,"input",5),C(5,$e,3,3,"button",6),C(6,Ke,3,3,"button",7),O(7,je,1,2,"material-icon",8,W),p(),C(9,qe,3,3,"div",9),p()),i&2){let e=r(),n=a(0),t=a(1),o=a(3),u=a(7),m=a(9);l(),x(o?1:-1),l(),I("winput__control--two-icons",u&&t==="password"),l(),x(n?3:4),l(2),x(u?5:-1),l(),x(t==="password"?6:-1),l(),P(e.icons()),l(2),x(m?9:-1)}}function Re(i,s){if(i&1&&(c(0,"span",2),w(1),g(2,"translate"),p()),i&2){r(2);let e=a(3);l(),S(y(2,1,e))}}function ze(i,s){if(i&1){let e=V();c(0,"textarea",17,0),g(2,"translate"),v("keydown",function(t){_(e);let o=r(2);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(2);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(2);return d(o.wBlur.emit(t))})("input",function(t){_(e);let o=r(2);return d(o.onInput(t))}),p(),R()}if(i&2){r(2);let e=a(0),n=a(4),t=a(6),o=a(8),u=a(9);I("error",u),M("placeholder",y(2,6,o||"Enter text..."))("manualDisabled",n)("formField",e)("ngClass",t),z()}}function We(i,s){if(i&1){let e=V();c(0,"textarea",18,0),g(2,"translate"),v("keydown",function(t){_(e);let o=r(2);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(2);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(2);return d(o.wBlur.emit(t))})("input",function(t){_(e);let o=r(2);return d(o.onInput(t))}),p()}if(i&2){let e=r(2),n=a(2),t=a(4),o=a(6),u=a(8),m=a(9);I("error",m),M("placeholder",y(2,7,u||"Enter text..."))("value",e.wModel()??"")("ngClass",o),F("disabled",t?"":null)("name",n)}}function Je(i,s){if(i&1&&(c(0,"div",9),w(1),g(2,"translate"),p()),i&2){r(2);let e=a(9);l(),S(y(2,1,e))}}function Ue(i,s){if(i&1&&(c(0,"label",1),C(1,Re,3,3,"span",2),c(2,"div",3),C(3,ze,3,8,"textarea",15)(4,We,3,9,"textarea",16),p(),C(5,Je,3,3,"div",9),p()),i&2){r();let e=a(0),n=a(3),t=a(9);l(),x(n?1:-1),l(2),x(e?3:4),l(2),x(t?5:-1)}}function He(i,s){if(i&1){let e=V();c(0,"label",20)(1,"input",21,0),v("keydown",function(t){_(e);let o=r(3);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(3);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(3);return d(o.wBlur.emit(t))})("input",function(t){_(e);let o=r(3);return d(o.onInput(t))}),p(),R(),J(3,"span",22),c(4,"span",23),w(5),g(6,"translate"),p()()}if(i&2){let e=s.$implicit;r(3);let n=a(0),t=a(4),o=a(6),u=a(9);I("disabled",t),l(),I("error",u),M("manualDisabled",t)("formField",n)("ngClass",o)("value",e),z(),l(4),S(y(6,9,e))}}function Ge(i,s){if(i&1&&O(0,He,7,11,"label",19,W),i&2){r(2);let e=a(5);P(e)}}function Xe(i,s){if(i&1){let e=V();c(0,"label",20)(1,"input",24,0),v("keydown",function(t){_(e);let o=r(3);return d(o.wKeydown.emit(t))})("input",function(t){let o=_(e).$implicit,u=r(3);return d(u.onInput(t,o))})("focus",function(t){_(e);let o=r(3);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(3);return d(o.wBlur.emit(t))}),p(),J(3,"span",22),c(4,"span",23),w(5),g(6,"translate"),p()()}if(i&2){let e=s.$implicit,n=r(3),t=a(2),o=a(4),u=a(6),m=a(9);I("disabled",o),l(),I("error",m),M("checked",n.wModel()===e)("disabled",o)("ngClass",u)("value",e)("name",t),l(4),S(y(6,10,e))}}function Ye(i,s){if(i&1&&O(0,Xe,7,12,"label",19,W),i&2){r(2);let e=a(5);P(e)}}function Ze(i,s){if(i&1&&C(0,Ge,2,0)(1,Ye,2,0),i&2){r();let e=a(0);x(e?0:1)}}function et(i,s){if(i&1){let e=V();c(0,"label",20)(1,"input",25,0),v("keydown",function(t){_(e);let o=r(3);return d(o.wKeydown.emit(t))})("input",function(t){let o=_(e).$implicit,u=r(3);return d(u.onInput(t,o))})("focus",function(t){_(e);let o=r(3);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(3);return d(o.wBlur.emit(t))}),p(),J(3,"span",26),c(4,"span",23),w(5),g(6,"translate"),p()()}if(i&2){let e=s.$implicit,n=s.$index,t=r(3),o=a(2),u=a(4),m=a(6),h=a(9);I("disabled",u),l(),I("error",h),M("checked",t.isItemChecked(e))("name",o+n)("disabled",u)("ngClass",m)("value",e),l(4),S(y(6,10,e))}}function tt(i,s){if(i&1&&O(0,et,7,12,"label",19,W),i&2){r(2);let e=a(5);P(e)}}function nt(i,s){if(i&1){let e=V();c(0,"input",29,0),v("keydown",function(t){_(e);let o=r(3);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(3);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(3);return d(o.wBlur.emit(t))})("input",function(t){_(e);let o=r(3);return d(o.onInput(t))}),p(),R()}if(i&2){r(3);let e=a(0),n=a(4),t=a(6),o=a(9);I("error",o),M("manualDisabled",n)("formField",e)("ngClass",t),z()}}function it(i,s){if(i&1){let e=V();c(0,"input",30,0),v("keydown",function(t){_(e);let o=r(3);return d(o.wKeydown.emit(t))})("focus",function(t){_(e);let o=r(3);return d(o.wFocus.emit(t))})("blur",function(t){_(e);let o=r(3);return d(o.wBlur.emit(t))})("input",function(t){_(e);let o=r(3);return d(o.onInput(t))}),p()}if(i&2){let e=r(3),n=a(2),t=a(4),o=a(6),u=a(9);I("error",u),M("disabled",t)("checked",!!e.wModel())("ngClass",o)("name",n)}}function ot(i,s){if(i&1&&(c(0,"span",23),w(1),g(2,"translate"),p()),i&2){r(3);let e=a(3);l(),S(y(2,1,e))}}function rt(i,s){if(i&1&&(c(0,"label",20),C(1,nt,2,5,"input",27)(2,it,2,6,"input",28),J(3,"span",26),C(4,ot,3,3,"span",23),p()),i&2){r(2);let e=a(0),n=a(3),t=a(4);I("disabled",t),l(),x(e?1:2),l(3),x(n?4:-1)}}function at(i,s){if(i&1&&C(0,tt,2,0)(1,rt,5,4,"label",19),i&2){r();let e=a(5);x(e.length?0:1)}}var Ee=(()=>{class i{constructor(){this.formField=b(null),this.wModel=re(null,{alias:"wModel"}),this.type=b(L.type),this.name=b(L.name),this.label=b(L.label),this.placeholder=b(L.placeholder),this.items=b(L.items),this.icons=b(L.icons),this.disabled=b(L.disabled),this.focused=b(L.focused),this.clearable=b(L.clearable),this.wClass=b(L.wClass),this.autocomplete=b(L.autocomplete),this.error=b(L.error),this.wChange=B(),this.wSubmit=B(),this.wBlur=B(),this.wFocus=B(),this.wKeydown=B(),this.showPassword=$(!1),this._inputEl=ie("inputEl"),this.fieldState=E(()=>{let e=this.formField();return e?e():null}),this.fieldError=E(()=>{let e=this.error();if(e)return e;let n=this.fieldState();if(!n)return null;let t=typeof n.touched=="function"?n.touched():!1,o=typeof n.dirty=="function"?n.dirty():!1;if(!((typeof n.invalid=="function"?n.invalid():!1)&&(t||o)))return null;let m=typeof n.errors=="function"?n.errors():null;if(!m)return null;let h=Array.isArray(m)?m:Object.values(m);if(!h.length)return null;let f=h[0];return f?typeof f=="string"?f:f.message&&typeof f.message=="string"?f.message:null:null})}ngAfterViewInit(){this.focused()&&this._inputEl()&&this._inputEl().nativeElement.focus()}onInput(e,n){let t=e.target,o=t.type,u=null;if(o==="checkbox"&&t instanceof HTMLInputElement)if(n!=null&&this.items().length&&!this.formField()){let m=this.wModel(),h=Array.isArray(m)?[...m]:[],f=h.indexOf(n);t.checked&&f===-1?h.push(n):!t.checked&&f!==-1&&h.splice(f,1),u=h}else u=t.checked;else o==="radio"?u=n??t.value:u=t.value;this.formField()||this.wModel.set(u),this.wChange.emit(u)}onSubmit(){this.wSubmit.emit()}onClear(){this.formField()||this.wModel.set(null),this.wChange.emit(null),this.onSubmit(),this._inputEl()&&this._inputEl().nativeElement.focus()}getAutocompleteAttr(e){let n=this.autocomplete();return n??(e==="password"?"current-password":null)}isItemChecked(e){let n=this.wModel();return Array.isArray(n)?n.includes(e):!!n}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=H({type:i,selectors:[["winput"]],viewQuery:function(n,t){n&1&&Z(t._inputEl,Pe,5),n&2&&U()},inputs:{formField:[1,"formField"],wModel:[1,"wModel"],type:[1,"type"],name:[1,"name"],label:[1,"label"],placeholder:[1,"placeholder"],items:[1,"items"],icons:[1,"icons"],disabled:[1,"disabled"],focused:[1,"focused"],clearable:[1,"clearable"],wClass:[1,"wClass"],autocomplete:[1,"autocomplete"],error:[1,"error"]},outputs:{wModel:"wModelChange",wChange:"wChange",wSubmit:"wSubmit",wBlur:"wBlur",wFocus:"wFocus",wKeydown:"wKeydown"},decls:14,vars:14,consts:[["inputEl",""],[1,"winput"],[1,"winput__label"],[1,"winput__control"],[1,"winput__field",3,"placeholder","autocomplete","manualDisabled","formField","error","ngClass","manualType"],[1,"winput__field",3,"placeholder","autocomplete","value","error","ngClass"],["type","button",1,"winput__icon-btn","winput__clear","material-icons"],["type","button",1,"winput__icon-btn","winput__eye","material-icons"],[3,"name","icon"],[1,"winput__error"],[1,"winput__field",3,"keydown","focus","blur","keyup.enter","input","placeholder","autocomplete","manualDisabled","formField","ngClass","manualType"],[1,"winput__field",3,"keydown","focus","blur","keyup.enter","input","placeholder","autocomplete","value","ngClass"],["type","button",1,"winput__icon-btn","winput__clear","material-icons",3,"click"],["type","button",1,"winput__icon-btn","winput__eye","material-icons",3,"click"],[3,"click","name","icon"],[1,"winput__field","winput__field--textarea",3,"placeholder","manualDisabled","error","formField","ngClass"],[1,"winput__field","winput__field--textarea",3,"placeholder","value","error","ngClass"],[1,"winput__field","winput__field--textarea",3,"keydown","focus","blur","input","placeholder","manualDisabled","formField","ngClass"],[1,"winput__field","winput__field--textarea",3,"keydown","focus","blur","input","placeholder","value","ngClass"],[1,"winput__choice",3,"disabled"],[1,"winput__choice"],["type","radio",1,"winput__native",3,"keydown","focus","blur","input","manualDisabled","formField","ngClass","value"],[1,"winput__choice-mark","winput__choice-mark--radio"],[1,"winput__choice-text"],["type","radio",1,"winput__native",3,"keydown","input","focus","blur","checked","disabled","ngClass","value","name"],["type","checkbox",1,"winput__native",3,"keydown","input","focus","blur","checked","name","disabled","ngClass","value"],[1,"winput__choice-mark"],["type","checkbox",1,"winput__native",3,"manualDisabled","formField","error","ngClass"],["type","checkbox",1,"winput__native",3,"disabled","error","checked","ngClass","name"],["type","checkbox",1,"winput__native",3,"keydown","focus","blur","input","manualDisabled","formField","ngClass"],["type","checkbox",1,"winput__native",3,"keydown","focus","blur","input","disabled","checked","ngClass","name"]],template:function(n,t){if(n&1&&(te(0)(1)(2)(3)(4)(5)(6)(7)(8)(9),C(10,Qe,10,7,"label",1),C(11,Ue,6,3,"label",1),C(12,Ze,2,1),C(13,at,2,1)),n&2){k(t.formField()),l();let o=k(t.type());l(),k(t.name()),l(),k(t.label()),l(),k(t.disabled()),l(),k(t.items()),l(),k(t.wClass()),l(),k(t.clearable()),l(),k(t.placeholder()),l(),k(t.fieldError()),l(),x(o!=="radio"&&o!=="checkbox"&&o!=="textarea"?10:-1),l(),x(o==="textarea"?11:-1),l(),x(o==="radio"?12:-1),l(),x(o==="checkbox"?13:-1)}},dependencies:[Ie,ve,Se,Me,Le,ae],styles:[".winput[_ngcontent-%COMP%]{display:grid;gap:6px}.winput__label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--c-text-primary)}.winput__control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--sp-2);border:1px solid var(--c-border);border-radius:var(--radius);background:var(--c-bg-secondary);padding:10px 12px;box-shadow:var(--shadow-sm);transition:border-color var(--motion-fast) var(--easing),box-shadow var(--motion-fast) var(--easing),background-color var(--motion-fast) var(--easing)}.winput__control[_ngcontent-%COMP%]:focus-within{box-shadow:var(--focus-ring);border-color:color-mix(in srgb,var(--c-primary) 40%,var(--c-border))}.winput__control._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.winput__control._textarea[_ngcontent-%COMP%]{align-items:stretch}.winput__field[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0;border:0;outline:0;background:transparent;color:var(--c-text-primary);font:inherit}.winput__field[_ngcontent-%COMP%]::placeholder{color:var(--c-placeholder)}.winput__hint[_ngcontent-%COMP%]{font-size:.8rem;color:var(--c-text-muted)}.winput__error[_ngcontent-%COMP%]{font-size:.8rem;color:var(--c-secondary)}"],changeDetection:0})}}return i})();var D={disabled:!1,clearable:!1,placeholder:"Select an option...",multiple:!1,bindLabel:"name",bindValue:"_id",label:"",searchable:!1,searchableBy:"name",items:[],buttons:[]};var se=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=G({type:i,selectors:[["","wselectView",""]]})}}return i})(),ce=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=G({type:i,selectors:[["","wselectItem",""]]})}}return i})(),_e=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=G({type:i,selectors:[["","wselectSearch",""]]})}}return i})();var lt=["popupListEl"],st=()=>[],ct=(i,s)=>({item:i,index:s}),_t=(i,s)=>s.icon||s.text,dt=(i,s)=>s().id;function pt(i,s){if(i&1&&(c(0,"div",5),w(1),g(2,"translate"),p()),i&2){r();let e=a(1);l(),A(" ",y(2,1,e)," ")}}function ut(i,s){if(i&1&&(c(0,"span",15),w(1),g(2,"translate"),p()),i&2){r(3);let e=a(0);l(),S(y(2,1,e))}}function mt(i,s){i&1&&(c(0,"span"),w(1,",\xA0"),p())}function Ct(i,s){if(i&1){let e=V();c(0,"span",16),C(1,mt,2,0,"span"),c(2,"span",17)(3,"span"),w(4),g(5,"translate"),p(),c(6,"button",18),v("click",function(t){_(e);let o=r().$index;return r(3).removeItem(o),d(t.stopPropagation())}),w(7," close "),p()()()}if(i&2){let e=r(),n=e.$implicit,t=e.$index,o=r(3);l(),x(t?1:-1),l(3),S(y(5,2,o.allItem[n]))}}function xt(i,s){if(i&1&&C(0,Ct,8,4,"span",16),i&2){let e=s.$implicit,n=r(3);x(n.allItem[e]?0:-1)}}function ft(i,s){if(i&1&&(c(0,"div",14),C(1,ut,3,3,"span",15),O(2,xt,1,1,null,null,Ce),p()),i&2){r(2);let e=a(3);l(),x(e.length?-1:1),l(),P(e)}}function wt(i,s){if(i&1&&(w(0),g(1,"translate")),i&2){let e=r(3),n=a(4);A(" ",y(1,1,e.allItem[n])," ")}}function bt(i,s){if(i&1&&(c(0,"span",15),w(1),g(2,"translate"),p()),i&2){r(3);let e=a(0);l(),S(y(2,1,e))}}function ht(i,s){if(i&1&&(c(0,"div",14),C(1,wt,2,3)(2,bt,3,3,"span",15),p()),i&2){r(2);let e=a(4);l(),x(e?1:2)}}function vt(i,s){if(i&1&&(c(0,"div",13),C(1,ft,4,1,"div",14)(2,ht,3,1,"div",14),p()),i&2){r();let e=a(2);l(),x(e?1:2)}}function gt(i,s){if(i&1){let e=V();c(0,"button",19),v("click",function(t){return _(e),r().clear(),d(t.stopPropagation())}),w(1," close "),p()}}function yt(i,s){if(i&1){let e=V();c(0,"button",22),v("click",function(t){return _(e),r().$implicit.click(),d(t.stopPropagation())}),w(1),p()}if(i&2){let e=r().$implicit;I("_disabled-btn",e.disabled),l(),A(" ",e.icon," ")}}function It(i,s){if(i&1){let e=V();c(0,"button",23),v("click",function(t){return _(e),r().$implicit.click(),d(t.stopPropagation())}),w(1),p()}if(i&2){let e=r().$implicit;I("_disabled-btn",e.disabled),l(),A(" ",e.text," ")}}function Tt(i,s){if(i&1&&C(0,yt,2,3,"button",20)(1,It,2,3,"button",21),i&2){let e=s.$implicit;x(e.icon?0:e.text?1:-1)}}function Vt(i,s){if(i&1){let e=V();c(0,"winput",29),g(1,"translate"),v("wChange",function(t){_(e);let o=r(3);return d(o.search.set((t??"")+""))}),p()}i&2&&M("placeholder",fe(y(1,3,"Enter search text...")))("focused",!0)}function kt(i,s){if(i&1&&(c(0,"div",25),Y(1,9),X(2,Vt,2,5,"ng-template",null,3,ne),p()),i&2){let e=ee(3),n=r(2);l(),M("ngTemplateOutlet",n.searchTpl()||e)}}function Mt(i,s){if(i&1&&Y(0,27),i&2){let e=s.$implicit,n=s.$index;r();let t=ee(8),o=r();M("ngTemplateOutlet",o.itemTpl()||t)("ngTemplateOutletContext",he(2,ct,e,n))}}function St(i,s){i&1&&(c(0,"div",28),w(1," Nothing was found "),p())}function Lt(i,s){if(i&1&&(w(0),g(1,"translate")),i&2){let e=r().item,n=r(2);A(" ",y(1,1,e()[n.bindLabel()])," ")}}function Dt(i,s){i&1&&(w(0),g(1,"translate")),i&2&&A(" ",y(1,1,"Unknown item")," ")}function Et(i,s){if(i&1){let e=V();c(0,"button",30),v("click",function(){let t=_(e).item,o=r(2);return d(o.selectOption(t()))}),c(1,"span",31),w(2),p(),c(3,"div",32)(4,"div",33),C(5,Lt,2,3)(6,Dt,2,3),p()()()}if(i&2){let e=s.item,n=s.index,t=r(2),o=a(2),u=a(3),m=a(4),h=e().id,f=o?u.includes(h):m===h,T=t.activeIndex()===n;I("_selected",f)("_active",T),F("aria-selected",f?"true":"false")("data-index",n),l(2),A(" ",f?"check":""," "),l(3),x(e()[t.bindLabel()]?5:6)}}function Ft(i,s){if(i&1&&(c(0,"div",24),v("click",function(n){return n.stopPropagation()}),C(1,kt,4,1,"div",25),c(2,"div",26,1),O(4,Mt,1,5,"ng-container",27,dt),C(6,St,2,0,"div",28),p(),X(7,Et,7,8,"ng-template",null,2,ne),p()),i&2){r();let e=a(2),n=a(5),t=a(6);I("_search",n),F("aria-multiselectable",e?"true":null),l(),x(n?1:-1),l(3),P(t),l(2),x(t!=null&&t.length?-1:6)}}var tn=(()=>{class i{constructor(){this.disabled=b(D.disabled),this.clearable=b(D.clearable),this.placeholder=b(D.placeholder),this.multiple=b(D.multiple),this.bindLabel=b(D.bindLabel),this.bindValue=b(D.bindValue),this.label=b(D.label),this.searchable=b(D.searchable),this.searchableBy=b(D.searchableBy),this.items=b(D.items),this.buttons=b(D.buttons),this.formField=b(null,{alias:"formField"}),this.field=b(null,{alias:"field"}),this._resolvedField=E(()=>this.formField()??this.field()),this.viewTpl=oe(se,{read:K}),this.itemTpl=oe(ce,{read:K}),this.searchTpl=oe(_e,{read:K}),this.wModel=re(null,{alias:"wModel"}),this.wChange=B(),this._core=me(Te),this.allItem={},this.allItems=$(this._core.toSignalsArray([])),this.showOptions=$(!1),this.search=$(""),this.activeIndex=$(-1),this._popupListEl=ie("popupListEl"),this.isMulti=E(()=>this.multiple()),this._disabledCva=!1,this.isDisabled=E(()=>this.disabled()||this._disabledCva),this.selectedIds=E(()=>{let e=this.wModel();return this.isMulti()?Array.isArray(e)?e:[]:e==null?[]:[e]}),this.selectedId=E(()=>this.selectedIds()[0]??null),this.filteredItems=E(()=>{let e=(this.search()??"").toString().trim().toLowerCase(),n=this.allItems();return e?n.filter(t=>{let o=t();return(o.__search??o.name??"").toString().toLowerCase().includes(e)}):n}),this._onChange=()=>{},this._onTouched=()=>{},Q(()=>{let e=this._resolvedField();if(e)try{let t=e()?.value?.();this._equal(this.wModel(),t)||this.wModel.set(t)}catch(n){}}),Q(()=>{let e=this._resolvedField();if(e)try{let n=e();n?.value?.set&&n.value.set(this.wModel())}catch(n){}}),Q(()=>{let e=this.items(),n=this.bindLabel(),t=this.bindValue(),o=this.searchableBy();for(let f of Object.keys(this.allItem))delete this.allItem[f];let u=e.map(f=>{let T=f;if(typeof f=="function")try{T=f()}catch(N){T=f}let j,q;if(typeof T=="string"||typeof T=="number"||typeof T=="boolean")j=T,q=String(T);else if(T&&typeof T=="object"){let N=T;j=N[t]??N._id,q=N[n]??N.name??N.title??String(j)}else j=String(T),q=String(T);let de=q;if(T&&typeof T=="object"&&o){let N=o.split(/\s+/).filter(Boolean),le=[];for(let Oe of N){let pe=T[Oe];pe!=null&&le.push(String(pe))}le.length&&(de=le.join(" "))}let Fe={id:j,name:q,__search:de};return this.allItem[j]=q,Fe});this.allItems.set(this._core.toSignalsArray(u));let m=new Set(this.allItems().map(f=>f().id)),h=this.wModel();if(this.isMulti()){let f=(Array.isArray(h)?h:[]).filter(T=>m.has(T));JSON.stringify(f)!==JSON.stringify(h)&&this.wModel.set(f)}else(!h||this.allItems().length&&!m.has(h))&&this.wModel.set(null)}),Q(()=>{let e=this.wModel();this._onChange(e),this.wChange.emit(e)}),Q(()=>{if(!this.showOptions())return;let e=this.filteredItems().length;if(!e){this.activeIndex.set(-1);return}let n=this.activeIndex();(n<0||n>=e)&&(this.activeIndex.set(0),queueMicrotask(()=>this._scrollActiveIntoView()))})}toggleOptions(e=!this.showOptions()){this.isDisabled()||(this.showOptions.set(e),e?(this._primeActiveIndex(),queueMicrotask(()=>this._scrollActiveIntoView())):this.activeIndex.set(-1))}selectOption(e){if(this.isMulti()){let n=new Set(this.selectedIds());n.has(e.id)?n.delete(e.id):n.add(e.id),this.wModel.set([...n])}else this.wModel.set(e.id),this.showOptions.set(!1),this.activeIndex.set(-1);this._onTouched()}selectOptionAt(e){let n=this.filteredItems();e<0||e>=n.length||this.selectOption(n[e]())}removeItem(e){if(!this.isMulti())return;let n=[...this.selectedIds()];n.splice(e,1),this.wModel.set(n)}clear(){this.wModel.set(this.isMulti()?[]:null)}onKeydown(e){if(this.isDisabled())return;let n=e.key;if(!this.showOptions()){(n==="ArrowDown"||n==="ArrowUp"||n==="Enter"||n===" ")&&(e.preventDefault(),this.toggleOptions(!0));return}let t=this.filteredItems().length;switch(n){case"Escape":{e.preventDefault(),this.toggleOptions(!1);return}case"Tab":{this.toggleOptions(!1);return}case"ArrowDown":{if(e.preventDefault(),!t)return;let o=Math.min(this.activeIndex()<0?0:this.activeIndex()+1,t-1);this.activeIndex.set(o),this._scrollActiveIntoView();return}case"ArrowUp":{if(e.preventDefault(),!t)return;let o=Math.max(this.activeIndex()<0?t-1:this.activeIndex()-1,0);this.activeIndex.set(o),this._scrollActiveIntoView();return}case"Home":{if(e.preventDefault(),!t)return;this.activeIndex.set(0),this._scrollActiveIntoView();return}case"End":{if(e.preventDefault(),!t)return;this.activeIndex.set(t-1),this._scrollActiveIntoView();return}case"Enter":case" ":{e.preventDefault();let o=this.activeIndex();o>=0&&this.selectOptionAt(o);return}}}_primeActiveIndex(){let e=this.filteredItems();if(!e.length){this.activeIndex.set(-1);return}let n=this.selectedId();if(!this.isMulti()&&n!=null){let t=e.findIndex(o=>o().id===n);this.activeIndex.set(t>=0?t:0);return}if(this.isMulti()&&this.selectedIds().length){let t=new Set(this.selectedIds()),o=e.findIndex(u=>t.has(u().id));this.activeIndex.set(o>=0?o:0);return}this.activeIndex.set(0)}_scrollActiveIntoView(){let e=this.activeIndex();if(e<0)return;let n=this._popupListEl()?.nativeElement;if(!n)return;n.querySelector(`[data-index="${e}"]`)?.scrollIntoView({block:"nearest"})}writeValue(e){this._equal(this.wModel(),e)||this.wModel.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabledCva=e}_equal(e,n){return Array.isArray(e)||Array.isArray(n)?JSON.stringify(e)===JSON.stringify(n):e===n}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=H({type:i,selectors:[["wselect"]],contentQueries:function(n,t,o){n&1&&xe(o,t.viewTpl,se,5,K)(o,t.itemTpl,ce,5,K)(o,t.searchTpl,_e,5,K),n&2&&U(3)},viewQuery:function(n,t){n&1&&Z(t._popupListEl,lt,5),n&2&&U()},inputs:{disabled:[1,"disabled"],clearable:[1,"clearable"],placeholder:[1,"placeholder"],multiple:[1,"multiple"],bindLabel:[1,"bindLabel"],bindValue:[1,"bindValue"],label:[1,"label"],searchable:[1,"searchable"],searchableBy:[1,"searchableBy"],items:[1,"items"],buttons:[1,"buttons"],formField:[1,"formField"],field:[1,"field"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[we([{provide:ye,useExisting:ue(()=>i),multi:!0}])],decls:22,vars:21,consts:[["defaultView",""],["popupListEl",""],["defaultItem",""],["defaultSearch",""],[1,"wselect","w-full",3,"clickOutside","keydown"],[1,"wselect__label","mb-[var(--sp-2)]","text-[14px]","font-medium","text-[var(--c-text-primary)]"],["role","combobox","tabindex","0",1,"wselect__body","relative","flex","items-center","w-full","min-h-[48px]","h-[48px]","border","border-[var(--c-border)]","rounded-[var(--b-radius)]","bg-transparent","transition","px-[var(--sp-3)]","gap-[var(--sp-2)]"],[1,"wselect__header","flex","items-center","w-full","min-w-0","gap-[var(--sp-2)]",3,"click"],[1,"material-icons","text-[20px]","text-[var(--c-text-muted)]","select-none"],[3,"ngTemplateOutlet"],["type","button","aria-label","Clear",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5"],["type","button","aria-label","Toggle options",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","transition","hover:bg-black/5",3,"click"],["role","listbox",1,"wselect__popup","absolute","left-0","top-[calc(100%+var(--sp-2))]","z-10","w-full","bg-[var(--c-bg-secondary)]","border","border-[var(--c-border)]","rounded-[var(--b-radius-card)]","shadow-[0_0_4px_var(--c-border)]","overflow-hidden",3,"_search"],[1,"wselect__text","flex-1","min-w-0"],[1,"text-overflow","truncate","text-[var(--c-text-primary)]"],[1,"opacity-70"],[1,"inline-flex","items-center","align-middle"],[1,"inline-flex","items-center","gap-1"],["type","button","aria-label","Remove",1,"material-icons","text-[18px]","leading-none","inline-flex","items-center","justify-center","rounded-full","p-1","hover:bg-black/5",3,"click"],["type","button","aria-label","Clear",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"click"],["type","button","aria-label","Action",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"_disabled-btn"],["type","button",1,"text-[14px]","font-medium","text-[var(--c-text-secondary)]","px-2","py-1","rounded-md","hover:bg-black/5",3,"_disabled-btn"],["type","button","aria-label","Action",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"click"],["type","button",1,"text-[14px]","font-medium","text-[var(--c-text-secondary)]","px-2","py-1","rounded-md","hover:bg-black/5",3,"click"],["role","listbox",1,"wselect__popup","absolute","left-0","top-[calc(100%+var(--sp-2))]","z-10","w-full","bg-[var(--c-bg-secondary)]","border","border-[var(--c-border)]","rounded-[var(--b-radius-card)]","shadow-[0_0_4px_var(--c-border)]","overflow-hidden",3,"click"],[1,"wselect__search","p-[var(--sp-3)]","border-b","border-[var(--c-border)]"],[1,"popup-block","max-h-[220px]","overflow-y-auto","p-[var(--sp-2)]"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["translate","",1,"popup-block__empty-search","py-[var(--sp-3)]","text-center","text-[var(--c-text-primary)]","opacity-80"],[3,"wChange","placeholder","focused"],["type","button","role","option",1,"wselect__item","w-full","text-left","flex","items-center","gap-[var(--sp-2)]","px-[var(--sp-3)]","py-[var(--sp-2)]","rounded-[10px]","transition","hover:bg-black/5",3,"click"],[1,"material-icons","text-[18px]","leading-none","select-none","text-[var(--c-text-muted)]"],[1,"min-w-0","flex-1"],[1,"truncate","text-[14px]","text-[var(--c-text-primary)]"]],template:function(n,t){if(n&1){let o=V();te(0)(1)(2)(3)(4)(5)(6),c(7,"div",4),v("clickOutside",function(){return t.toggleOptions(!1)})("keydown",function(m){return t.onKeydown(m)}),C(8,pt,3,3,"div",5),c(9,"div",6)(10,"div",7),v("click",function(){return t.toggleOptions()}),c(11,"span",8),w(12," unfold_more "),p(),Y(13,9),X(14,vt,3,1,"ng-template",null,0,ne),p(),C(16,gt,2,0,"button",10),c(17,"button",11),v("click",function(m){return _(o),t.toggleOptions(),d(m.stopPropagation())}),w(18," expand_more "),p(),O(19,Tt,2,1,null,null,_t),C(21,Ft,9,5,"div",12),p()()}if(n&2){let o=ee(15),u=t.showOptions();k(t.placeholder()),l();let m=k(t.label());l();let h=k(t.isMulti());l();let f=k(t.selectedIds());l();let T=k(t.selectedId());l(),k(t.searchable()),l(),k(t.filteredItems()),l(2),x(m?8:-1),l(),I("_active",u),F("aria-expanded",u?"true":"false"),l(),I("_disabled",t.isDisabled()),l(3),M("ngTemplateOutlet",t.viewTpl()||o),l(3),x(t.clearable()&&(h?f.length:T)?16:-1),l(),I("_disabled",t.isDisabled())("_active",u),l(2),P(t.buttons()||be(20,st)),l(2),x(u?21:-1)}},dependencies:[ge,Ve,Ee,ke,ae],styles:['[_nghost-%COMP%]{display:block}._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}._disabled-btn[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.wselect__body._active[_ngcontent-%COMP%]{border-color:var(--c-primary)}.wselect__body[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:var(--focus-ring)}.wselect[_ngcontent-%COMP%]   .wselect__icon-btn._active[_ngcontent-%COMP%]{transform:rotate(180deg)}.wselect__item._selected[_ngcontent-%COMP%]{font-weight:600;background:#0000000d;position:relative}.wselect__item._selected[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:8px;bottom:8px;width:3px;border-radius:999px;background:var(--c-primary)}.wselect__item._active[_ngcontent-%COMP%]{outline:none;box-shadow:var(--focus-ring)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px;background-color:transparent}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:999px;background-color:var(--c-border)}'],changeDetection:0})}}return i})();export{L as a,Ee as b,D as c,tn as d};
