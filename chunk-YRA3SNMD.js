import{b as T}from"./chunk-5UTP5EEG.js";import"./chunk-PQZDESBD.js";import"./chunk-FTLRRYIQ.js";import"./chunk-XQJPQ7LG.js";import{a as I}from"./chunk-34FNLTQI.js";import"./chunk-AYMCA3C3.js";import{b as x}from"./chunk-DHEXM2DX.js";import{a as _,b as C,c as F,e as d,i as E}from"./chunk-NDTEPHHI.js";import{a as P}from"./chunk-FDHJPNWT.js";import{i as D,l as M}from"./chunk-BE45KCKU.js";import{$ as t,Aa as u,Ba as m,E as h,Ka as c,R as y,Za as g,ea as s,fa as p,ga as w,ub as v,ya as o,za as n}from"./chunk-GEUL6SEO.js";import{a,b as S}from"./chunk-6MDQTQU3.js";var k=F(r=>{d(r.name,{message:"Enter your name..."}),d(r.phone,{message:"Enter your phone..."}),d(r.bio,{message:"Enter your biography..."})});var R=(()=>{class r{constructor(){this.userService=h(I),this._emitterService=h(M),this._initialProfile=v(()=>{let e=this.userService.user();return{name:e.name||"",phone:e.phone||"",bio:e.bio||""}}),this.profileModel=y(this._initialProfile()),this.profileForm=_(this.profileModel,k),this.isSubmitDisabled=v(()=>this.profileForm().invalid()),this._emitterService.onComplete("us.user").pipe(D()).subscribe(()=>{this.profileModel.set(this._initialProfile()),this.profileForm().reset()})}wFormSubmit(){C(this.profileForm,e=>(this.userService.user.set(a(a({},this.userService.user()),e().value())),this.userService.updateMe(),Promise.resolve()))}updateThumb(e){this.userService.user.set(S(a({},this.userService.user()),{thumb:e})),this.userService.updateMe()}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=w({type:r,selectors:[["ng-component"]],decls:16,vars:12,consts:[[1,"grid","gap-4"],[1,"flex","flex-col","gap-4","rounded-[var(--radius-card)]","border","border-[var(--c-border)]","bg-[var(--c-bg-secondary)]","p-5","shadow-[var(--shadow-sm)]","sm:p-4"],[1,"flex","flex-col","gap-3"],["mode","single-image","view","thumb-only",3,"wImageChange","wImage","container","name","accept","clearable","preview","cropWidth","cropHeight"],[1,"flex","flex-col","gap-3",3,"submit"],["placeholder","Enter your name...",3,"formField"],["placeholder","Enter your phone...","type","tel",3,"formField"],["placeholder","Enter your bio...","type","textarea",3,"formField"],[1,"mt-2","flex","flex-wrap","gap-2"],["type","primary",3,"disabled"],["type","secondary",3,"wClick"],["icon","logout"]],template:function(l,i){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",2)(4,"ngx-file",3),c("wImageChange",function(f){return i.updateThumb(f||"")}),u(),n(5,"form",4),c("submit",function(f){return i.wFormSubmit(),f.preventDefault()}),m(6,"winput",5),s(),m(7,"winput",6),s(),m(8,"winput",7),s(),n(9,"div",8)(10,"wbutton",9),g(11," Update "),u(),n(12,"wbutton",10),c("wClick",function(){return i.userService.logout()}),m(13,"material-icon",11),n(14,"span"),g(15,"Logout"),u()()()()()()()()),l&2&&(t(4),o("wImage",i.userService.thumb())("container","user")("name",i.userService.user()._id+".jpg")("accept","image/*")("clearable",!1)("preview",!0)("cropWidth",512)("cropHeight",512),t(2),o("formField",i.profileForm.name),p(),t(),o("formField",i.profileForm.phone),p(),t(),o("formField",i.profileForm.bio),p(),t(2),o("disabled",i.isSubmitDisabled()))},dependencies:[x,E,T,P],encapsulation:2,changeDetection:0})}}return r})();export{R as ProfileComponent};
