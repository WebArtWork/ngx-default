import{$b as Ke,A as v,B as Q,C as A,Cb as L,D as y,Db as He,E as l,F as Te,Gb as ne,H as Re,Hb as ge,Ka as Ge,N as ue,O as U,Ob as w,P as F,Q as ee,R as d,Rb as T,S as N,Sb as We,T as Pe,Tb as qe,U as je,Ub as ze,V as E,Vb as Je,Wb as Ye,X as D,Xa as Le,Xb as Ze,aa as de,ac as Xe,c as m,ca as he,cc as Qe,d as Y,da as _,f as Z,g as Ve,h as V,ha as te,i as k,ia as b,j as Ae,ja as Be,jb as pe,k as K,l as Ee,la as G,m as x,n as Fe,oa as Ue,p as Ie,q as X,qa as fe,r as ke,s as j,t as xe,tb as M,u as Oe,ub as S,v as Ne,w as O,wb as $e,x as B,xb as ie,z as ce}from"./chunk-GEUL6SEO.js";import{a as h,b as g,e as f}from"./chunk-6MDQTQU3.js";function Fi(n){n||(n=l(F));let t=new m(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(B(t))}function me(n,t){let e=t?.injector??l(ue),i=new Z(1),r=N(()=>{let s;try{s=n()}catch(o){M(()=>i.error(o));return}M(()=>i.next(s))},{injector:e,manualCleanup:!0});return e.get(F).onDestroy(()=>{r.destroy(),i.complete()}),i.asObservable()}var lt=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(_(he),_(E))};static \u0275dir=b({type:n})}return n})(),xt=(()=>{class n extends lt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=je(n)))(r||n)}})();static \u0275dir=b({type:n,features:[G]})}return n})(),ct=new A("");var Ot={provide:ct,useExisting:ce(()=>ut),multi:!0};function Nt(){let n=ge()?ge().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Tt=new A(""),ut=(()=>{class n extends lt{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Nt())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(_(he),_(E),_(Tt,8))};static \u0275dir=b({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ge("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[pe([Ot]),G]})}return n})();function we(n){return n==null||Ce(n)===0}function Ce(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Rt=new A(""),Pt=new A(""),jt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,et=class{static min(t){return Bt(t)}static max(t){return Ut(t)}static required(t){return Gt(t)}static requiredTrue(t){return Lt(t)}static email(t){return $t(t)}static minLength(t){return Ht(t)}static maxLength(t){return Wt(t)}static pattern(t){return qt(t)}static nullValidator(t){return dt()}static compose(t){return _t(t)}static composeAsync(t){return yt(t)}};function Bt(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Ut(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Gt(n){return we(n.value)?{required:!0}:null}function Lt(n){return n.value===!0?null:{required:!0}}function $t(n){return we(n.value)||jt.test(n.value)?null:{email:!0}}function Ht(n){return t=>{let e=t.value?.length??Ce(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function Wt(n){return t=>{let e=t.value?.length??Ce(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function qt(n){if(!n)return dt;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(we(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function dt(n){return null}function ht(n){return n!=null}function ft(n){return Ue(n)?V(n):n}function pt(n){let t={};return n.forEach(e=>{t=e!=null?h(h({},t),e):t}),Object.keys(t).length===0?null:t}function gt(n,t){return t.map(e=>e(n))}function zt(n){return!n.validate}function mt(n){return n.map(t=>zt(t)?t:e=>t.validate(e))}function _t(n){if(!n)return null;let t=n.filter(ht);return t.length==0?null:function(e){return pt(gt(e,t))}}function vt(n){return n!=null?_t(mt(n)):null}function yt(n){if(!n)return null;let t=n.filter(ht);return t.length==0?null:function(e){let i=gt(e,t).map(ft);return Fe(i).pipe(K(pt))}}function Dt(n){return n!=null?yt(mt(n)):null}function tt(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Jt(n){return n._rawValidators}function Yt(n){return n._rawAsyncValidators}function _e(n){return n?Array.isArray(n)?n:[n]:[]}function se(n,t){return Array.isArray(n)?n.includes(t):n===t}function it(n,t){let e=_e(t);return _e(n).forEach(r=>{se(e,r)||e.push(r)}),e}function nt(n,t){return _e(t).filter(e=>!se(n,e))}var oe=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control?.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ve=class extends oe{name;get formDirective(){return null}get path(){return null}},z=class extends oe{_parent=null;name=null;valueAccessor=null},ye=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Yi=(()=>{class n extends ye{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(_(z,2))};static \u0275dir=b({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[G]})}return n})();var $="VALID",re="INVALID",R="PENDING",H="DISABLED",I=class{},ae=class extends I{value;source;constructor(t,e){super(),this.value=t,this.source=e}},W=class extends I{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},q=class extends I{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},P=class extends I{status;source;constructor(t,e){super(),this.status=t,this.source=e}};var De=class extends I{source;constructor(t){super(),this.source=t}};function Zt(n){return(le(n)?n.validators:n)||null}function Kt(n){return Array.isArray(n)?vt(n):n||null}function Xt(n,t){return(le(t)?t.asyncValidators:n)||null}function Qt(n){return Array.isArray(n)?Dt(n):n||null}function le(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var be=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return M(this.statusReactive)}set status(t){M(()=>this.statusReactive.set(t))}_status=S(()=>this.statusReactive());statusReactive=d(void 0);get valid(){return this.status===$}get invalid(){return this.status===re}get pending(){return this.status==R}get disabled(){return this.status===H}get enabled(){return this.status!==H}errors;get pristine(){return M(this.pristineReactive)}set pristine(t){M(()=>this.pristineReactive.set(t))}_pristine=S(()=>this.pristineReactive());pristineReactive=d(!0);get dirty(){return!this.pristine}get touched(){return M(this.touchedReactive)}set touched(t){M(()=>this.touchedReactive.set(t))}_touched=S(()=>this.touchedReactive());touchedReactive=d(!1);get untouched(){return!this.touched}_events=new Y;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(it(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(it(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(nt(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(nt(t,this._rawAsyncValidators))}hasValidator(t){return se(this._rawValidators,t)}hasAsyncValidator(t){return se(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;t.onlySelf||this._parent?.markAsTouched(g(h({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new q(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),t.onlySelf||this._parent?._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new q(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;t.onlySelf||this._parent?.markAsDirty(g(h({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new W(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),t.onlySelf||this._parent?._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new W(!0,i))}markAsPending(t={}){this.status=R;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new P(this.status,e)),this.statusChanges.emit(this.status)),t.onlySelf||this._parent?.markAsPending(g(h({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=H,this.errors=null,this._forEachChild(r=>{r.disable(g(h({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ae(this.value,i)),this._events.next(new P(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(g(h({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=$,this._forEachChild(i=>{i.enable(g(h({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(g(h({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){t.onlySelf||(this._parent?.updateValueAndValidity(t),t.skipPristineCheck||this._parent?._updatePristine({},e),this._parent?._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$||this.status===R)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ae(this.value,e)),this._events.next(new P(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),t.onlySelf||this._parent?.updateValueAndValidity(g(h({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?H:$}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=R,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=ft(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i?.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new P(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new ee,this.statusChanges=new ee}_calculateStatus(){return this._allControlsDisabled()?H:this.errors?re:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R)?R:this._anyControlsHaveStatus(re)?re:$}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,t.onlySelf||this._parent?._updatePristine(t,e),r&&this._events.next(new W(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new q(this.touched,e)),t.onlySelf||this._parent?._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){le(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!!this._parent?.dirty&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Kt(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Qt(this._rawAsyncValidators)}};var bt=new A("",{factory:()=>Me}),Me="always";function ei(n,t){return[...t.path,n]}function ti(n,t,e=Me){ni(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),ri(n,t),oi(n,t),si(n,t),ii(n,t)}function rt(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ii(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function ni(n,t){let e=Jt(n);t.validator!==null?n.setValidators(tt(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Yt(n);t.asyncValidator!==null?n.setAsyncValidators(tt(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();rt(t._rawValidators,r),rt(t._rawAsyncValidators,r)}function ri(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wt(n,t)})}function si(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wt(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function wt(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oi(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function ai(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function li(n){return Object.getPrototypeOf(n.constructor)===xt}function ci(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===ut?e=s:li(s)?i=s:r=s}),r||i||e||null}function st(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function ot(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ui=class extends be{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Zt(e),Xt(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),le(e)&&(e.nonNullable||e.initialValueIsDefault)&&(ot(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new De(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){st(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){st(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ot(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var di={provide:z,useExisting:ce(()=>hi)},at=Promise.resolve(),hi=(()=>{class n extends z{_changeDetectorRef;callSetDisabledState;control=new ui;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ee;constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ci(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),ai(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective?.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ti(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){at.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&He(i);at.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ei(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(_(ve,9),_(Rt,10),_(Pt,10),_(ct,10),_(L,8),_(bt,8))};static \u0275dir=b({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[pe([di]),G,Pe]})}return n})();var fi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=te({type:n});static \u0275inj=Q({})}return n})();var Ki=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:bt,useValue:e.callSetDisabledState??Me}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=te({type:n});static \u0275inj=Q({imports:[fi]})}return n})();String.prototype.capitalize||(String.prototype.capitalize=function(){return this.length>0?this.charAt(0).toUpperCase()+this.slice(1).toLowerCase():""});var St=(()=>{class n{constructor(){if(this._platformId=l(D),this._isBrowser=w(this._platformId),this._destroyRef=l(F),this.deviceID="",this._afterWhile={},this.device="",this.viewport=d("desktop"),this.isViewportMobile=S(()=>this.viewport()==="mobile"),this.isViewportTablet=S(()=>this.viewport()==="tablet"),this.isViewportDesktop=S(()=>this.viewport()==="desktop"),this.version="1.0.0",this.appVersion="",this.dateVersion="",this._locked={},this._unlockResolvers={},this._isBrowser){let e=localStorage.getItem("deviceID");this.deviceID=e||(typeof crypto?.randomUUID=="function"?crypto.randomUUID():this.UUID()),localStorage.setItem("deviceID",this.deviceID),this.detectDevice(),this.detectViewport()}else this.deviceID=this.UUID()}UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let i=Math.random()*16|0;return(e==="x"?i:i&3|8).toString(16)})}ota(e,i=!1){if(Array.isArray(e))return e;if(typeof e!="object"||e===null)return[];let r=[];for(let s in e)e.hasOwnProperty(s)&&(e[s]||typeof e[s]=="number"||typeof e[s]=="boolean")&&(i?r.push(s):r.push(e[s]));return r}splice(e,i,r="_id"){if(!Array.isArray(e)||!Array.isArray(i))return i;let s=new Set(e.map(o=>o[r]));return i.filter(o=>!s.has(o[r]))}ids2id(...e){return e.sort((i,r)=>Number(i.toString().substring(0,8))>Number(r.toString().substring(0,8))?1:-1),e.join()}afterWhile(e,i,r=1e3){typeof e=="function"&&(i=e,e="common"),typeof i=="function"&&typeof r=="number"&&(typeof e=="string"?(clearTimeout(this._afterWhile[e]),this._afterWhile[e]=setTimeout(i,r)):typeof e=="object"?(clearTimeout(e.__afterWhile),e.__afterWhile=setTimeout(i,r)):console.warn("badly configured after while"))}copy(e,i){for(let r in e)typeof e[r]!="object"||e[r]instanceof Date||Array.isArray(e[r])||e[r]===null?i[r]=e[r]:((typeof i[r]!="object"||i[r]instanceof Date||Array.isArray(i[r])||i[r]===null)&&(i[r]={}),this.copy(e[r],i[r]))}detectDevice(){if(!this._isBrowser)return;let e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e)?this.device="Windows Phone":/android/i.test(e)?this.device="Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?this.device="iOS":this.device="Web"}isMobile(){return this.device==="Windows Phone"||this.device==="Android"||this.device==="iOS"}isTablet(){return this._isBrowser?this.device==="iOS"&&/iPad/.test(navigator.userAgent):!1}isWeb(){return this.device==="Web"}isAndroid(){return this.device==="Android"}isIos(){return this.device==="iOS"}detectViewport(){if(!this._isBrowser)return;let e=window.matchMedia("(max-width: 767.98px)"),i=window.matchMedia("(min-width: 768px) and (max-width: 1023.98px)"),r=window.matchMedia("(min-width: 1024px)"),s=()=>e.matches?this.viewport.set("mobile"):i.matches?this.viewport.set("tablet"):this.viewport.set("desktop");s(),e.addEventListener("change",s),i.addEventListener("change",s),r.addEventListener("change",s),this._destroyRef.onDestroy(()=>{e.removeEventListener("change",s),i.removeEventListener("change",s),r.removeEventListener("change",s)})}setVersion(){this.version=this.appVersion||"",this.version+=this.version&&this.dateVersion?" ":"",this.version+=this.dateVersion||""}setAppVersion(e){this.appVersion=e,this.setVersion()}setDateVersion(e){this.dateVersion=e,this.setVersion()}lock(e){this._locked[e]=!0,this._unlockResolvers[e]||(this._unlockResolvers[e]=[])}unlock(e){this._locked[e]=!1,this._unlockResolvers[e]&&(this._unlockResolvers[e].forEach(i=>i()),this._unlockResolvers[e]=[])}onUnlock(e){return this._locked[e]?new Promise(i=>{this._unlockResolvers[e]||(this._unlockResolvers[e]=[]),this._unlockResolvers[e].push(i)}):Promise.resolve()}locked(e){return!!this._locked[e]}toSignal(e,i={}){if(Object.keys(i).length){let r={};for(let s in i)r[s]=d(i[s](e));return d(h(h({},e),r))}else return d(e)}toSignalsArray(e,i={}){return e.map(r=>this.toSignal(r,i))}pushSignal(e,i,r={}){e.push(this.toSignal(i,r))}removeSignalByField(e,i,r="_id"){let s=e.findIndex(o=>o()[r]===i);s>-1&&e.splice(s,1)}trackBySignalField(e){return(i,r)=>r()[e]}findSignalByField(e,i,r="_id"){return e.find(s=>s()[r]===i)}updateSignalByField(e,i,r,s){let o=this.findSignalByField(e,i,s);o&&o.update(r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ct=class{constructor(t,e,i,r=""){this.documents=d([]),this.page=1,this.__core=l(St),this.__cdr=l(L),this.localDocumentsFilter=()=>!0,this.updatableFields=["_id","name","description","data"],this.configType="server",this.perPage=20,this._module="";let s=t;this.__formService=e,this.form=s,this.crudService=i,this._module=r}setDocumentsQuery(t){return t}setDocuments(t=this.page,e=""){return e=this.setDocumentsQuery(e),new Promise(i=>{this.configType==="server"?(this.page=t,this.__core.afterWhile(this,()=>{this.crudService.get({page:t,query:e},this.getOptions()).subscribe(r=>{this.documents.update(()=>(r||[]).map(s=>this.crudService.getSignal(s))),i(),this.__cdr.markForCheck()})},250)):(this.documents.update(()=>this.crudService.getDocs().filter(this.localDocumentsFilter).map(r=>this.crudService.getSignal(r))),this.crudService.loaded.pipe(j(1)).subscribe(()=>{i(),this.__cdr.markForCheck()}))})}preCreate(t){delete t.__creating}allowCreate(){return!0}allowMutate(){return!0}allowUrl(){return!0}allowSort(){return!1}getOptions(){return{}}bulkManagement(t=!0){return()=>{this.__formService.modalDocs(t?[]:this.documents().map(e=>Object.fromEntries(this.updatableFields.map(i=>[i,e()[i]])))).then(e=>f(this,null,function*(){if(t)for(let i of e)this.preCreate(i),yield k(this.crudService.create(i));else{for(let i of this.documents())e.find(r=>r._id===i()._id)||(yield k(this.crudService.delete(i())));for(let i of e){let r=this.documents().find(s=>s()._id===i._id);r?(r.update(s=>(this.__core.copy(i,s),s)),yield k(this.crudService.update(r()))):(this.preCreate(i),yield k(this.crudService.create(i)))}}this.setDocuments()}))}}create(){this.__formService.modal(this.form,{label:"Create",click:(t,e)=>f(this,null,function*(){e(),this.preCreate(t),yield k(this.crudService.create(t)),this.setDocuments()})},{data:{}},()=>{},{resetOnSubmit:!0})}update(t){this.__formService.modal(this.form,{label:"Update",click:(e,i)=>{i(),this.__core.copy(e,t),this.crudService.update(t),this.__cdr.markForCheck()}},t)}delete(t){return f(this,null,function*(){this.crudService.delete(t).subscribe(()=>{this.setDocuments()})})}mutateUrl(t){this.__formService.modalUnique(this._module,"url",t)}moveUp(t){let e=this.documents().findIndex(i=>i()._id===t._id);e&&this.documents.update(i=>(i.splice(e,1),i.splice(e-1,0,this.crudService.getSignal(t)),i));for(let i=0;i<this.documents().length;i++)this.documents()[i]().order!==i&&(this.documents()[i]().order=i,this.crudService.update(this.documents()[i]()));this.__cdr.markForCheck()}getConfig(){let t={create:this.allowCreate()?()=>{this.create()}:null,update:this.allowMutate()?e=>{this.update(e)}:null,delete:this.allowMutate()?e=>{this.delete(e)}:null,buttons:[],headerButtons:[],allDocs:!0};return this.allowUrl()&&t.buttons.push({icon:"cloud_download",click:e=>{this.mutateUrl(e)}}),this.allowSort()&&t.buttons.push({icon:"arrow_upward",click:e=>{this.moveUp(e)}}),this.allowCreate()&&t.headerButtons.push({icon:"playlist_add",click:this.bulkManagement(),class:"playlist"}),this.allowMutate()&&t.headerButtons.push({icon:"edit_note",click:this.bulkManagement(!1),class:"edit"}),this.configType==="server"?g(h({},t),{paginate:this.setDocuments.bind(this),perPage:this.perPage,setPerPage:this.crudService.setPerPage?.bind(this.crudService),allDocs:!1}):t}},Vt=(()=>{class n{constructor(){this._signals=new Map,this._closers=new Map,this._streams=new Map,this._done=new Map}_getSignal(e){let i=this._signals.get(e);return i||(i=d(void 0,{equal:()=>!1}),this._signals.set(e,i)),i}_getCloser(e){let i=this._closers.get(e);return i||(i=new Y,this._closers.set(e,i)),i}_getStream(e){let i=this._streams.get(e);if(!i){let r=this._getSignal(e),s=this._getCloser(e);i=me(r).pipe(Ne(1),B(s),Oe()),this._streams.set(e,i)}return i}emit(e,i){this._getSignal(e).set(i)}on(e){return this._getStream(e)}off(e){let i=this._closers.get(e);i&&(i.next(),i.complete(),this._closers.delete(e)),this._signals.delete(e),this._streams.delete(e)}offAll(){for(let e of Array.from(this._closers.keys()))this.off(e)}has(e){return this._signals.has(e)}_getDoneSignal(e){let i=this._done.get(e);return i||(i=d(void 0),this._done.set(e,i)),i}complete(e,i=!0){this._getDoneSignal(e).set(i)}clearCompleted(e){(this._done.get(e)??this._getDoneSignal(e)).set(void 0)}completed(e){return this._getDoneSignal(e)()}isCompleted(e){return this._getDoneSignal(e)()!==void 0}onComplete(e,i){let r=(Array.isArray(e)?e:[e]).filter(Boolean),s=r.map(a=>me(this._getDoneSignal(a)).pipe(X(u=>u!==void 0),K(u=>u))),o;if(r.length<=1?o=s[0]?.pipe(j(1))??new m:i?.mode==="any"?o=Ie(...s).pipe(j(1)):o=Ee(s).pipe(j(1)),i?.timeoutMs&&Number.isFinite(i.timeoutMs)&&(o=o.pipe(Ae({first:i.timeoutMs}))),i?.abort){let a=new m(u=>{let c=()=>{u.next(),u.complete()};return i.abort.addEventListener("abort",c),()=>i.abort.removeEventListener("abort",c)});o=o.pipe(B(a))}return o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),J=new A("config"),Se={store:{prefix:"waStore"},meta:{useTitleSuffix:!1,defaults:{links:{}}},socket:!1,http:{url:"",headers:{}}},pi={headers:{},url:""},gi=(()=>{class n{constructor(e,i){if(this._http=i,this._isBrowser=w(l(D)),this.errors=[],this.url="",this.locked=!1,this.awaitLocked=[],this._headers={},this._http_headers=new T(this._headers),this._config=h(h({},pi),e.http||{}),typeof this._config.url=="string"&&this.setUrl(this._config.url),this._isBrowser){this.url=localStorage.getItem("wacom-http.url")||this.url;let r=localStorage.getItem("wacom-http.headers");this._headers=r?JSON.parse(r):this._headers,this._http_headers=new T(this._headers)}if(typeof this._config.headers=="object"){for(let r in this._config.headers)this._headers[r]=this._config.headers[r];this._http_headers=new T(this._headers)}}setUrl(e){this.url=e,this._isBrowser&&localStorage.setItem("wacom-http.url",e)}removeUrl(){this.url=this._config.url||"",this._isBrowser&&localStorage.removeItem("wacom-http.url")}set(e,i){this._headers[e]=i,this._isBrowser&&localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new T(this._headers)}header(e){return this._headers[e]}remove(e){delete this._headers[e],this._isBrowser&&localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new T(this._headers)}_httpMethod(e,i,r,s){return e==="post"?this._http.post(i,r,s):e==="put"?this._http.put(i,r,s):e==="patch"?this._http.patch(i,r,s):e==="delete"?this._http.delete(i,s):this._http.get(i,s)}_post(e,i,r=a=>{},s={},o="post"){if(typeof s=="function"&&(s={err:s}),s.err||(s.err=c=>{}),this.locked&&!s.skipLock)return new m(c=>{let p=setTimeout(()=>{this._post(e,i,r,s,o).subscribe(c)},100);this.awaitLocked.push(p)});let a=(s.url||this.url)+e;this.prepare_handle(a,i);let u=new Z(1);return this._httpMethod(o,a,i,{headers:this._http_headers}).pipe(xe(),ke(c=>(this.handleError(s.err,()=>{this._post(e,i,r,s,o).subscribe(u)})(c),u.error(c),Ve))).subscribe({next:c=>{if(s.acceptance&&typeof s.acceptance=="function"&&!s.acceptance(c)){let p=new We({error:"Acceptance failed",status:400});this.handleError(s.err,()=>{})(p),u.error(p);return}if(s.replace&&typeof s.replace=="function"&&(Array.isArray(this._getObjectToReplace(c,s.data))?this._getObjectToReplace(c,s.data).map(p=>s.replace(p)):this._getObjectToReplace(c,s.data)&&s.replace(this._getObjectToReplace(c,s.data))),Array.isArray(s.fields)){if(Array.isArray(this._getObjectToReplace(c,s.data)))this._getObjectToReplace(c,s.data).map(p=>this._newDoc(p,s.fields));else if(this._getObjectToReplace(c,s.data)){let p=this._newDoc(this._getObjectToReplace(c,s.data),s.fields);s.data?this._setObjectToReplace(c,s.data,p):c=p}}this.response_handle(a,c,()=>r(c)),u.next(c),u.complete()},error:c=>u.error(c),complete:()=>u.complete()}),u.asObservable()}post(e,i,r=o=>{},s={}){return this._post(e,i,r,s)}put(e,i,r=o=>{},s={}){return this._post(e,i,r,s,"put")}patch(e,i,r=o=>{},s={}){return this._post(e,i,r,s,"patch")}delete(e,i=s=>{},r={}){return this._post(e,null,i,r,"delete")}get(e,i=s=>{},r={}){return this._post(e,null,i,r,"get")}clearLocked(){for(let e of this.awaitLocked)clearTimeout(e);this.awaitLocked=[]}lock(){this.locked=!0}unlock(){this.locked=!1}handleError(e,i){return r=>new Promise(s=>{this.err_handle(r,e,i),s()})}err_handle(e,i,r){typeof i=="function"&&i(e);for(let s of this.errors)typeof s=="function"&&s(e,r)}prepare_handle(e,i){}response_handle(e,i,r){typeof r=="function"&&r()}_getObjectToReplace(e,i=""){if(i.includes(".")){let r=i.split(""),s=r.pop()||"";return this._getObjectToReplace(e[s]||{},r.join("."))}else return i?e[i]:e}_setObjectToReplace(e,i="",r){for(;i.includes(".");){let s=i.split(""),o=s.pop()||"";e=e[o]||{},i=s.join(".")}e[i]=r}_newDoc(e,i){let r={};for(let s of i)r[s]=e[s];return r}static{this.\u0275fac=function(i){return new(i||n)(y(J,8),y(qe))}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mi={endpoints:["https://api.webart.work/status","https://www.google.com/generate_204","https://www.gstatic.com/generate_204","https://www.cloudflare.com/cdn-cgi/trace"],intervalMs:3e4,timeoutMs:2500,goodLatencyMs:300,maxConsecutiveFails:3};var _i=(()=>{class n{constructor(e){this._isBrowser=w(l(D)),this._status=d(this._isBrowser&&navigator.onLine?"poor":"none"),this._latencyMs=d(null),this._isOnline=d(this._isBrowser?navigator.onLine:!1),this.status=this._status.asReadonly(),this.latencyMs=this._latencyMs.asReadonly(),this.isOnline=this._isOnline.asReadonly(),this._fails=0,this._emitterService=l(Vt),this._config=h(h({},mi),e.network||{}),this._isBrowser&&(this._bindEvents(),this.recheckNow(),window.setInterval(()=>this.recheckNow(),this._config.intervalMs))}recheckNow(){return f(this,null,function*(){if(!this._isBrowser)return;let e=yield this._pingAny();e.ok&&e.latency!=null?(this._fails=0,this._latencyMs.set(e.latency),this._isOnline.set(!0)):(this._fails++,this._latencyMs.set(null)),this._updateClassification()})}_updateClassification(){if(!this._isOnline()||this._fails>=this._config.maxConsecutiveFails){this._status()!=="none"&&(this._status.set("none"),this._emitterService.emit("wacom_offline"));return}let e=this._latencyMs();e!=null&&e<=this._config.goodLatencyMs?this._status()!=="good"&&(this._status.set("good"),this._emitterService.emit("wacom_online")):this._status()!=="poor"&&(this._status.set("poor"),this._emitterService.emit("wacom_online"))}_bindEvents(){this._isBrowser&&(window.addEventListener("online",()=>{this._isOnline.set(!0),this.recheckNow()}),window.addEventListener("offline",()=>{this._isOnline.set(!1),this._updateClassification()}),navigator.connection?.addEventListener?.("change",()=>this.recheckNow()))}_pingAny(){return f(this,null,function*(){if(!this._isBrowser)return{ok:!1,latency:null};for(let e of this._config.endpoints){let i=!e.includes("api.webart.work"),r=yield this._measure(e,this._config.timeoutMs,i).catch(()=>null);if(r?.ok)return r}return{ok:!1,latency:null}})}_measure(e,i,r=!1){return f(this,null,function*(){let s=new AbortController,o=setTimeout(()=>s.abort(),i),a=performance.now();try{let u=yield fetch(e+(e.includes("?")?"&":"?")+"t="+Date.now(),{method:"GET",cache:"no-store",credentials:"omit",signal:s.signal,mode:r?"no-cors":"cors"});clearTimeout(o);let c=Math.round(performance.now()-a);return{ok:r?!0:u.ok,latency:c}}catch(u){return clearTimeout(o),{ok:!1,latency:null}}})}static{this.\u0275fac=function(i){return new(i||n)(y(J,8))}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),At=(()=>{class n{constructor(e){this._isBrowser=w(l(D)),this._prefix="",this._config=h(h({},Se),e?.store||{})}setPrefix(e){this._prefix=e}set(e,i,r){return f(this,null,function*(){e=this._applyPrefix(e);try{if(this._config.set)yield this._config.set(e,i,()=>r?.onSuccess?.(),r?.onError);else{if(!this._isBrowser)return r?.onSuccess?.(),!0;localStorage.setItem(e,i),r?.onSuccess?.()}return!0}catch(s){return console.error(s),r?.onError?.(s),!1}})}get(e,i){return f(this,null,function*(){e=this._applyPrefix(e);try{if(this._config.get)return(yield this._config.get(e,o=>i?.onSuccess?.(o??null),i?.onError))??null;if(!this._isBrowser)return i?.onSuccess?.(null),null;let r=localStorage.getItem(e);return i?.onSuccess?.(r??null),r??null}catch(r){return console.error(r),i?.onError?.(r),null}})}setJson(e,i,r){return f(this,null,function*(){return this.set(e,JSON.stringify(i),r)})}getJson(e,i){return f(this,null,function*(){let r=i?.clearOnError??!0,s=yield this.get(e,{onError:i?.onError});if(s===null||s.trim()===""){let o=i?.defaultValue??null;return i?.onSuccess?.(o),o}try{let o=JSON.parse(s);return i?.onSuccess?.(o),o}catch(o){console.error(s,o),i?.onError?.(o),r&&(yield this.remove(e));let a=i?.defaultValue??null;return i?.onSuccess?.(a),a}})}remove(e,i){return f(this,null,function*(){e=this._applyPrefix(e);try{return this._config.remove?yield this._config.remove(e,()=>i?.onSuccess?.(),i?.onError):this._isBrowser?(localStorage.removeItem(e),i?.onSuccess?.(),!0):(i?.onSuccess?.(),!0)}catch(r){return console.error(r),i?.onError?.(r),!1}})}clear(e){return f(this,null,function*(){try{if(this._config.clear)yield this._config.clear();else{if(!this._isBrowser)return e?.onSuccess?.(),!0;localStorage.clear()}return e?.onSuccess?.(),!0}catch(i){return console.error(i),e?.onError?.(i),!1}})}_applyPrefix(e){return this._config.prefix&&(e=this._config.prefix+e),this._prefix&&(e=this._prefix+e),e}static{this.\u0275fac=function(i){return new(i||n)(y(J,8))}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Mt=class{constructor(t){this._config=t,this._isBrowser=w(l(D)),this._url="/api/",this._docs=[],this._perPage=20,this._filteredDocumentsCallbacks=[],this.__httpService=l(gi),this.__storeService=l(At),this.__coreService=l(St),this.__emitterService=l(Vt),this.__networkService=l(_i),this._signal={},this._signals={},this._fieldSignals={},this._fetchingId={},this._onOnline=[],this._randomCount=0,this._config.signalFields=this._config.signalFields||{},this._url+=this._config.name,this.loaded=this.__emitterService.onComplete(this._config.name+"_loaded"),this.getted=this.__emitterService.onComplete(this._config.name+"_getted"),this._config.unauthorized?this.restoreDocs():this._isBrowser&&localStorage.getItem("waw_user")&&JSON.parse(localStorage.getItem("waw_user"))._id===localStorage.getItem(this._config.name+"waw_user_id")&&this.restoreDocs(),this.__emitterService.on("wipe").subscribe(()=>{this.clearDocs(),this._filterDocuments()}),this.__emitterService.on("wacom_online").subscribe(()=>{for(let e of this._onOnline)e();this._onOnline.length=0})}getSignal(t){if(typeof t!="string"&&(t=this._id(t)),this._signal[t])return this._signal[t];let e=this.doc(t);return this._signal[t]=this.__coreService.toSignal(e,this._config.signalFields),this._signal[t]}getSignals(t,e){let i=t+"_"+JSON.stringify(e);return this._signals[i]||(this._signals[i]=d(this._getSignals(i))),this._signals[i]}_getSignals(t){let e=t.indexOf("_");if(e===-1)return[];let i=t.slice(0,e),r=t.slice(e+1),s=[];for(let o of this.getDocs()){if(JSON.stringify(o[i])!==r)continue;let a=this._id(o);a&&s.push(this.getSignal(a))}return s}getFieldSignals(t){return this._fieldSignals[t]||(this._fieldSignals[t]=d(this._getFieldSignals(t))),this._fieldSignals[t]}_getFieldSignals(t){let e={};for(let i of this.getDocs()){let r=this._id(i);if(!r)continue;let s=String(i[t]);e[s]||(e[s]=[]),e[s].push(this.getSignal(r))}return e}removeSignals(t=[]){for(let e in this._signal)t.includes(e)||delete this._signal[e]}restoreDocs(){return f(this,null,function*(){let t=yield this.__storeService.getJson("docs_"+this._config.name);if(t?.length){this._docs.length=0,this._docs.push(...t),this._filterDocuments();for(let e of this._docs)if(e.__deleted)this.delete(e,e.__options?.delete||{});else if(!e._id)this.create(e,e.__options?.create||{});else if(e.__modified?.length)for(let i of e.__modified)i.startsWith("up")?this.update(e,e.__options?.[i]||{}):this.unique(e,e.__options?.[i]||{});this.__emitterService.complete(this._config.name+"_loaded",this._docs)}})}setDocs(){this.__storeService.setJson("docs_"+this._config.name,this._docs)}getDocs(t=()=>!0){return this._docs.filter(t)}getDoc(t){return this._docs.find(t)}clearDocs(){this._docs.splice(0,this._docs.length),this.setDocs(),this._updateSignals()}addDocs(t){if(Array.isArray(t))for(let e of t)this.addDoc(e)}addDoc(t){this._config.replace&&this._config.replace(t);let e=this._docs.find(i=>this._id(t)&&this._id(i)===this._id(t)||t._localId&&i._localId===t._localId);e?(this.__coreService.copy(t,e),this.__coreService.copy(e,t),this._syncSignalForDoc(e)):(this._docs.push(t),this._syncSignalForDoc(t)),this.setDocs()}new(t={}){return g(h({},t),{_id:void 0,_localId:this._localId(),__created:!1,__modified:!1})}doc(t){if(this._signal[t])return this._signal[t]();let e=this._docs.find(i=>this._id(i)===t||i._localId&&i._localId===Number(t))||null;return e||(e=this.new({_id:t}),this._docs.push(e),this.setDocs()),!this._docs.find(i=>this._id(i)===t)&&!this._fetchingId[t]&&(this._fetchingId[t]=!0,setTimeout(()=>{this.fetch({_id:t}).subscribe(i=>{this._fetchingId[t]=!1,i&&(this.__coreService.copy(i,e),this._syncSignalForDoc(e))})})),e}setPerPage(t){this._perPage=t}beforeCreate(t,e){return t}afterCreate(t,e,i){}beforeUpdate(t,e){return t}afterUpdate(t,e,i){}beforeUnique(t,e){return t}afterUnique(t,e,i){}beforeDelete(t,e){return t}afterDelete(t,e,i){}beforeFetch(t,e){return t}afterFetch(t,e,i){}_mw(t){return Promise.resolve(t)}get(t={},e={}){if(!this.__networkService.isOnline())return new m(o=>{this._onOnline.push(()=>{this.get(t,e).subscribe(o)})});if(this._isBrowser&&!this._config.unauthorized&&localStorage.getItem("waw_user")){let o=JSON.parse(localStorage.getItem("waw_user"));localStorage.setItem(this._config.name+"waw_user_id",o._id)}let i=`${this._url}/get${e.name||""}`,r=(typeof t.page=="number"||t.query?"?":"")+(t.query||"")+(typeof t.page=="number"?`&skip=${this._perPage*(t.page-1)}&limit=${this._perPage}`:""),s=this.__httpService.get(`${i}${r}`);return s.subscribe({next:o=>{o=o||[],typeof t.page!="number"&&this.clearDocs(),o.forEach(a=>this.addDoc(a)),e.callback&&e.callback(o),typeof t.page!="number"&&(this._filterDocuments(),this.__emitterService.complete(this._config.name+"_getted",this._docs)),this.__emitterService.emit(`${this._config.name}_get`,this._docs),this.__emitterService.emit(`${this._config.name}_changed`,this._docs)},error:o=>{e.errCallback&&e.errCallback(o)}}),s}create(t={},e={}){return x(()=>V(this._mw(this.beforeCreate(t,e))).pipe(O(i=>{if(t=i||t,t._id)return this.update(t,e);if(t._localId||=this._localId(),t.__options||={},t.__options.create=e,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new m(s=>{this._onOnline.push(()=>{this.create(t,e).subscribe(s)})});if(t.__creating)return new m(s=>{s.error(new Error("Document is currently already creating."))});this._config.appId&&(t.appId=this._config.appId),t.__creating=!0;let r=this.__httpService.post(`${this._url}/create${e.name||""}`,t);return r.subscribe({next:s=>f(this,null,function*(){s?(this.__coreService.copy(s,t),this.addDoc(t),this._filterDocuments(),e.callback&&e.callback(t),yield this._mw(this.afterCreate(s,t,e))):(t.__creating=!1,e.errCallback&&e.errCallback(s)),this.__emitterService.emit(`${this._config.name}_create`,t),this.__emitterService.emit(`${this._config.name}_list`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)}),error:s=>{t.__creating=!1,e.errCallback&&e.errCallback(s)}}),r})))}fetch(t={},e={}){return x(()=>V(this._mw(this.beforeFetch(t,e))).pipe(O(i=>{if(t=i||t,!this.__networkService.isOnline())return new m(s=>{this._onOnline.push(()=>{this.fetch(t,e).subscribe(s)})});let r=this.__httpService.post(`${this._url}/fetch${e.name||""}`,t);return r.subscribe({next:s=>f(this,null,function*(){s?(this.addDoc(s),this._filterDocuments(),e.callback&&e.callback(s),yield this._mw(this.afterFetch(s,t,e)),this.__emitterService.emit(`${this._config.name}_changed`,s)):e.errCallback&&e.errCallback(s)}),error:s=>{e.errCallback&&e.errCallback(s)}}),r})))}updateAfterWhile(t,e={}){return new m(i=>{this.__coreService.afterWhile(this._id(t),()=>{this.update(t,e).subscribe({next:r=>{i.next(r)},error:r=>{i.error(r)},complete:()=>{i.complete()}})})})}update(t,e={}){return x(()=>V(this._mw(this.beforeUpdate(t,e))).pipe(O(i=>{if(t=i||t,this._updateModified(t,"up"+(e.name||""),e),!this.__networkService.isOnline())return new m(s=>{this._onOnline.push(()=>{this.update(t,e).subscribe(s)})});let r=this.__httpService.post(`${this._url}/update${e.name||""}`,t);return r.subscribe({next:s=>f(this,null,function*(){if(s){this._removeModified(t,"up"+(e.name||""));let o=this.doc(t._id);this.__coreService.copy(s,o),this.__coreService.copy(s,t),this._syncSignalForDoc(o),e.callback&&e.callback(t),yield this._mw(this.afterUpdate(s,t,e))}else e.errCallback&&e.errCallback(s);this.__emitterService.emit(`${this._config.name}_update`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)}),error:s=>{e.errCallback&&e.errCallback(s)}}),r})))}unique(t,e={}){return x(()=>V(this._mw(this.beforeUnique(t,e))).pipe(O(i=>{if(t=i||t,this._updateModified(t,"un"+(e.name||""),e),!this.__networkService.isOnline())return new m(s=>{this._onOnline.push(()=>{this.unique(t,e).subscribe(s)})});let r=this.__httpService.post(`${this._url}/unique${e.name||""}`,t);return r.subscribe({next:s=>f(this,null,function*(){s?(this._removeModified(t,"un"+(e.name||"")),t[e.name]=s,this._syncSignalForDoc(t),e.callback&&e.callback(t),yield this._mw(this.afterUnique(s,t,e))):e.errCallback&&e.errCallback(s),this.__emitterService.emit(`${this._config.name}_unique`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)}),error:s=>{e.errCallback&&e.errCallback(s)}}),r})))}delete(t,e={}){return x(()=>V(this._mw(this.beforeDelete(t,e))).pipe(O(i=>{if(t=i||t,t.__deleted=!0,t.__options||={},t.__options.delete=e,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new m(s=>{this._onOnline.push(()=>{this.delete(t,e).subscribe(s)})});let r=this.__httpService.post(`${this._url}/delete${e.name||""}`,t);return r.subscribe({next:s=>f(this,null,function*(){if(s){let o=this._docs.findIndex(a=>this._id(a)===this._id(t));o!==-1&&this._docs.splice(o,1),this.setDocs(),this._syncSignalForDoc(g(h({},t),{__deleted:!0})),this._filterDocuments(),e.callback&&e.callback(t),yield this._mw(this.afterDelete(s,t,e))}else e.errCallback&&e.errCallback(s);this.__emitterService.emit(`${this._config.name}_delete`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)}),error:s=>{e.errCallback&&e.errCallback(s)}}),r})))}filteredDocuments(t,e={}){let i=()=>{if(Array.isArray(t)){let r=this._docs.filter(s=>!s.__deleted).filter(e.valid??(()=>!0));t.length=0,typeof e.sort=="function"&&(r=r.sort(e.sort)),t.push(...r)}else{let r=t;for(let s in r)for(let o=r[s].length-1;o>=0;o--){let a=typeof e.field=="function"?e.field(r[s][o]):e.field||"author",u=r[s][o];this._docs.find(c=>Array.isArray(c[a])?c[a].includes(u[this._id(c)]):c[a]===u[this._id(c)])||r[s].splice(o,1)}for(let s of this._docs){if(s.__deleted)continue;let o=typeof e.field=="function"?e.field(s):e.field||"author";(typeof e.valid=="function"?!e.valid(s):Array.isArray(s[o])?!s[o]?.length:!s[o])||(typeof e.field=="function"?e.field(s)&&!r[s[o]].find(a=>a._id===s._id)&&r[s[o]].push(s):Array.isArray(s[o])?s[o].forEach(a=>{r[a]=r[a]||[],r[a].find(u=>u._id===s._id)||r[a].push(s)}):(r[s[o]]=r[s[o]]||[],r[s[o]].find(a=>a._id===s._id)||r[s[o]].push(s)))}if(typeof e.sort=="function")for(let s in r)r[s].sort(e.sort)}e.filtered?.(t)};return this._filteredDocumentsCallbacks.push(i),i}_localId(){return+(Date.now()+""+this._randomCount++)}_id(t){return t[this._config._id||"_id"]?.toString()}_filterDocuments(){for(let t of this._filteredDocumentsCallbacks)t();this.__emitterService.emit(`${this._config.name}_filtered`)}_updateModified(t,e,i){t.__modified||=[],t.__options||={},t.__options[e]=i,t.__modified.find(r=>r===e)||(t.__modified.push(e),this.addDoc(t))}_removeModified(t,e){t.__modified||=[],t.__modified.find(i=>i===e)&&(t.__modified.splice(t.__modified.findIndex(i=>i===e),1),this.addDoc(t))}_syncSignalForDoc(t){let e=this._id(t);e&&this._signal[e]&&this._signal[e].set(h({},t)),this._updateSignals()}_updateSignals(){for(let t in this._signals)this._signals[t].set(this._getSignals(t));for(let t in this._fieldSignals)this._fieldSignals[t].set(this._getFieldSignals(t))}},yn=(()=>{class n{constructor(){this._doc=l(U),this._isBrowser=w(l(D)),this.mode=d(void 0),this.modes=d(["light","dark"]),this.density=d(void 0),this.densities=d(["comfortable","compact"]),this.radius=d(void 0),this.radiuses=d(["rounded","square"]),this.themeIndex=d(0)}setMode(e){this._isBrowser&&(this._doc.documentElement.dataset.mode=e,localStorage.setItem("theme.mode",e)),this.mode.set(e)}setDensity(e){this._isBrowser&&(this._doc.documentElement.dataset.density=e,localStorage.setItem("theme.density",e)),this.density.set(e)}setRadius(e){this._isBrowser&&(this._doc.documentElement.dataset.radius=e,localStorage.setItem("theme.radius",e)),this.radius.set(e)}nextTheme(){let e=this.modes().length,i=this.densities().length,r=this.radiuses().length,s=e*i*r,o=(this.themeIndex()+1)%s;this.themeIndex.set(o);let a=i*r,u=Math.floor(o/a),c=o%a,p=Math.floor(c/r),Ft=c%r;this.setMode(this.modes()[u]),this.setDensity(this.densities()[p]),this.setRadius(this.radiuses()[Ft]),this._isBrowser&&localStorage.setItem("theme.index",String(o))}init(){let e=this._isBrowser&&localStorage.getItem("theme.mode")||"light",i=this._isBrowser&&localStorage.getItem("theme.density")||"comfortable",r=this._isBrowser&&localStorage.getItem("theme.radius")||"rounded";this.mode.set(e),this.density.set(i),this.radius.set(r),this.themeIndex.set(this._isBrowser&&Number(localStorage.getItem("theme.index"))||0),this._isBrowser&&(this._doc.documentElement.dataset.mode=e,this._doc.documentElement.dataset.density=i,this._doc.documentElement.dataset.radius=r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),C=n=>typeof n<"u",vi=(()=>{class n{constructor(e,i,r,s,o){this._config=e,this._router=i,this._activatedRoute=r,this._meta=s,this._titleService=o,this._isBrowser=w(l(D)),this._managedTagSelectors=new Set,this._managedLinkRels=new Set,this._doc=l(U),this._config=this._config||Se,this._metaConfig=this._config.meta||{},(!C(this._metaConfig.applyFromRoutes)||this._metaConfig.applyFromRoutes)&&this._router.events.pipe(X(u=>u instanceof Ke)).subscribe(()=>{let u=this._readDeepestRouteMeta();u?this.applyMeta(u):this.reset()})}setDefaults(e){this._metaConfig.defaults=h(h({},this._metaConfig.defaults||{}),e)}applyMeta(e={}){if(e.disableUpdate)return;this._removeManagedTags();let i=this._metaConfig.defaults||{},r=this._resolveTitle(e,i),s=this._resolveValue(e.description,i.description),o=this._resolveValue(e.image,i.image),a=this._resolveRobots(e,i);this._setTitleTriplet(r),this._setDescriptionTriplet(s),this._setImageTriplet(o),C(a)&&this._updateTag("robots",a,"name")}reset(){this.applyMeta({})}setLink(e){if(this._isBrowser&&!(!e||!Object.keys(e).length))for(let i of Object.keys(e)){let r=e[i],s=Array.from(this._doc.head.querySelectorAll(`link[rel="${i}"]`)),o=s[0];if(!o)o=this._doc.createElement("link"),o.setAttribute("rel",i),this._doc.head.appendChild(o);else if(s.length>1)for(let a=1;a<s.length;a++)s[a].remove();o.setAttribute("href",r),this._managedLinkRels.add(i)}}resetLinks(){if(this._isBrowser){for(let e of this._managedLinkRels)Array.from(this._doc.head.querySelectorAll(`link[rel="${e}"]`)).forEach(r=>r.remove());this._managedLinkRels.clear()}}_readDeepestRouteMeta(){let e=this._activatedRoute;for(;e?.firstChild;)e=e.firstChild;let i=e?.snapshot?.data;return i&&i.meta||null}_resolveTitle(e,i){let r=this._resolveValue(e.title,i.title)||"";if(this._metaConfig.useTitleSuffix){let s=C(e.titleSuffix)?e.titleSuffix:i.titleSuffix;r+=s||""}return r}_resolveRobots(e,i){if(C(e.robots))return(e.robots||"")+"";if(C(i.robots))return(i.robots||"")+"";let r=C(e.index)?e.index:i.index;if(C(r))return r?"index, follow":"noindex, follow"}_resolveValue(e,i){if(C(e))return(e||"")+"";if(C(i))return(i||"")+""}_setTitleTriplet(e){this._titleService.setTitle(e),this._updateTag("og:title",e,"property"),this._updateTag("twitter:title",e,"name"),this._updateTag("name",e,"itemprop")}_setDescriptionTriplet(e){if(!C(e))return;let i=e;this._updateTag("description",i,"name"),this._updateTag("og:description",i,"property"),this._updateTag("twitter:description",i,"name"),this._updateTag("description",i,"itemprop")}_setImageTriplet(e){if(!C(e))return;let i=e;this._updateTag("og:image",i,"property"),this._updateTag("twitter:image:src",i,"name"),this._updateTag("image",i,"itemprop")}_updateTag(e,i,r){let s=r==="itemprop"?`itemprop="${e}"`:`${r}="${e}"`,o=r==="itemprop"?{itemprop:e,content:i}:{[r]:e,content:i};this._meta.updateTag(o,s),this._managedTagSelectors.add(s)}_removeManagedTags(){for(let e of this._managedTagSelectors)this._meta.removeTag(e);this._managedTagSelectors.clear()}static{this.\u0275fac=function(i){return new(i||n)(y(J,8),y(Qe),y(Xe),y(Ye),y(Ze))}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dn=(()=>{class n{constructor(e){this._metaService=e}canActivate(e){let i=e.data&&e.data.meta||null;return i?this._metaService.applyMeta(i):this._metaService.reset(),!0}static{this.\u0275fac=function(i){return new(i||n)(y(vi))}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Et=(()=>{class n{constructor(){this._storeService=l(At),this._signalTranslates={},this._storeService.getJson("translations",{onSuccess:e=>{Array.isArray(e)&&this.setMany(e)}})}_updateStorageTranslations(){let e=[];for(let i in this._signalTranslates)e.push({text:this._signalTranslates[i](),sourceText:i});this._storeService.setJson("translations",e)}translate(e){return this._signalTranslates[e]||(this._signalTranslates[e]=d(e)),this._signalTranslates[e]}setMany(e){let i=e.map(s=>s.sourceText),r=new Set(i);for(let s in this._signalTranslates)r.has(s)||this._signalTranslates[s].set(s);for(let s of e)this._setTranslation(s.sourceText,s.text);this._updateStorageTranslations()}setOne(e){this._setTranslation(e.sourceText,e.text),this._updateStorageTranslations()}get(){return this._signalTranslates}_setTranslation(e,i){this._signalTranslates[e]||(this._signalTranslates[e]=d(e)),this._signalTranslates[e].set(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bn=(()=>{class n{constructor(){this._platformId=l(D),this._isBrowser=w(this._platformId),this.translate=ie(""),this._el=l(E),this._translationService=l(Et),this._original=d(""),this._lastKey="",this._lastSignal=d(""),this._isBrowser&&(de(()=>{let e=(this._el.nativeElement.textContent??"").trim();this._original.set(e)}),N(()=>{if(!this._isBrowser)return;let e=this._original().trim(),r=((this.translate()||"").trim()||e).trim();r&&(r!==this._lastKey&&(this._lastKey=r,this._lastSignal=this._translationService.translate(r)),this._el.nativeElement.textContent=this._lastSignal())}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=b({type:n,selectors:[["","translate",""]],inputs:{translate:[1,"translate"]}})}}return n})(),wn=(()=>{class n{constructor(){this._translationService=l(Et)}transform(e){return this._translationService.translate(e)()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Be({name:"translate",type:n,pure:!0})}}return n})(),Cn=(()=>{class n{constructor(){this.clickOutside=$e(),this._host=l(E),this._cdr=l(L),this._dref=l(F),this._doc=l(U),this._isBrowser=w(l(D)),this._handler=e=>{this._host.nativeElement.contains(e.target)||(this.clickOutside.emit(e),this._cdr.markForCheck())},this._isBrowser&&this._doc.addEventListener("pointerdown",this._handler,!0),this._dref.onDestroy(()=>this._doc.removeEventListener("pointerdown",this._handler,!0))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=b({type:n,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"}})}}return n})(),Mn=(()=>{class n{constructor(){this._el=l(E),this.manualDisabled=ie(null,{alias:"manualDisabled"}),this._syncDisabledEffect=N(()=>{let e=this.manualDisabled();if(e==null)return;let i=this._el.nativeElement;i&&(i.disabled=!!e)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=b({type:n,selectors:[["input","manualDisabled",""],["textarea","manualDisabled",""]],inputs:{manualDisabled:[1,"manualDisabled"]}})}}return n})();var Sn=(()=>{class n{constructor(){this._el=l(E),this.manualType=ie(null,{alias:"manualType"}),this._syncTypeEffect=N(()=>{let e=this.manualType();if(!e)return;let i=this._el.nativeElement;i&&i.type!==e&&(i.type=e)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=b({type:n,selectors:[["input","manualType",""],["textarea","manualType",""]],inputs:{manualType:[1,"manualType"]}})}}return n})();var Vn=(()=>{class n{constructor(){this._isBrowser=w(l(D)),this._appRef=l(fe),this._injector=l(Re),this._doc=l(U),this._providedIn={}}appendById(e,i={},r){let s=ne(e,{environmentInjector:this._injector});this.projectComponentInputs(s,i),this._appRef.attachView(s.hostView);let o=s.hostView.rootNodes[0],a=this._doc.getElementById(r);return this._isBrowser&&a&&typeof a.appendChild=="function"&&a.appendChild(o),s.changeDetectorRef.detectChanges(),{nativeElement:o,componentRef:s,remove:()=>this.removeComponent(s)}}appendComponent(e,i={},r){if(i.providedIn){if(this._providedIn[i.providedIn])return;this._providedIn[i.providedIn]=!0}let s=ne(e,{environmentInjector:this._injector});this.projectComponentInputs(s,i),this._appRef.attachView(s.hostView);let o=s.hostView.rootNodes[0],a=r||this._doc.body;return this._isBrowser&&a&&typeof a.appendChild=="function"&&a.appendChild(o),s.changeDetectorRef.detectChanges(),{nativeElement:o,componentRef:s,remove:()=>this.removeComponent(s,i.providedIn)}}getComponentRef(e,i={}){let r=ne(e,{environmentInjector:this._injector});return this.projectComponentInputs(r,i),this._appRef.attachView(r.hostView),r.changeDetectorRef.detectChanges(),r}projectComponentInputs(e,i){if(i){let r=Object.getOwnPropertyNames(i);for(let s of r)e.instance[s]=i[s]}return e}removeComponent(e,i){this._appRef.detachView(e.hostView),e.destroy(),i&&delete this._providedIn[i]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function An(n=Se){return Te([{provide:J,useValue:n},ze(Je())])}export{ct as a,ut as b,et as c,z as d,Yi as e,be as f,hi as g,Ki as h,Fi as i,St as j,Ct as k,Vt as l,gi as m,mi as n,At as o,Mt as p,yn as q,Dn as r,bn as s,wn as t,Cn as u,Mn as v,Sn as w,Vn as x,An as y};
